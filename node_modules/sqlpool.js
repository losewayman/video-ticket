var mysql = require('mysql');

var pool = mysql.createPool({
    host: 'localhost',
    user: 'root',
    password: '19980625',
    database: 'user'
}); //连接数据库
var mysqlpool = {};
mysqlpool.func = function(callback) {
    pool.getConnection(function(err, connection) { //pool.getConnection这行代码，其作用是连接mysql数据库。
        if (err) { //第一个参数是err，如果出错的话，err将有值，应该对其进行处理；
            console.log(err); //第二个参数是connection，他实际上就是指连接成功后的对象，用其进行query处理
        } else {
            callback(connection);
        }
        connection.release(); //释放连接 
    })
}



module.exports = mysqlpool;

//callback 函数样例
/*
function(connect) {
    connect.query("select * from login;", function(err, result) {      //connection.query(mysql的语句, 可能的参数, 回调函数);
        if (err) {
            console.log(err);
            return callback(err);
        } else {
            console.log('666', JSON.stringify(result));
        }

    })
}
*/